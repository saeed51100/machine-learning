I am developing a time-series classification pipeline in Python (Jupyter Notebook) to identify Forex price trend regimes based on historical price data.
The dataset consists of approximately 170,000 rows of Forex OHLCV data on the H1 (hourly) timeframe, with the following characteristics:
* Dataset Description
     The dataset contains a 'CLOSE' price column and a corresponding 'Label' column that indicates price trend events with three classes:
        0 → No meaningful trend (sideways / flat movement)
        1 → Bullish trend
        2 → Bearish trend


* Request
I have implemented a labeling function that assigns these labels based on price movements and successfully detects and labels trends.
I now want to extend this same approach to also detect and label smaller (sub-trend) movements that occur within larger trends, without altering the existing behavior for large trends.
In the current code, the label_trend_points function is executed on df_model and the entire dataset is labeled.
Please continue to call the same function on trends of 24 candles and above to identify and relabel sub-trends.
// My code:
